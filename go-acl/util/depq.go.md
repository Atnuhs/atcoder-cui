---
data:
  _extendedDependsOn:
  - icon: ':heavy_check_mark:'
    path: go-acl/main.go
    title: go-acl/main.go
  - icon: ':heavy_check_mark:'
    path: go-acl/splay/map.go
    title: go-acl/splay/map.go
  - icon: ':heavy_check_mark:'
    path: go-acl/splay/node.go
    title: go-acl/splay/node.go
  - icon: ':heavy_check_mark:'
    path: go-acl/splay/node_test.go
    title: go-acl/splay/node_test.go
  - icon: ':heavy_check_mark:'
    path: go-acl/splay/set.go
    title: go-acl/splay/set.go
  - icon: ':heavy_check_mark:'
    path: go-acl/splay/set_test.go
    title: go-acl/splay/set_test.go
  - icon: ':heavy_check_mark:'
    path: go-acl/testlib/assert.go
    title: go-acl/testlib/assert.go
  - icon: ':heavy_check_mark:'
    path: go-acl/util/depq_test.go
    title: go-acl/util/depq_test.go
  - icon: ':heavy_check_mark:'
    path: go-acl/util/lib.go
    title: go-acl/util/lib.go
  - icon: ':heavy_check_mark:'
    path: go-acl/util/lib_test.go
    title: go-acl/util/lib_test.go
  - icon: ':heavy_check_mark:'
    path: go-acl/util/math.go
    title: go-acl/util/math.go
  - icon: ':heavy_check_mark:'
    path: go-acl/util/math_test.go
    title: go-acl/util/math_test.go
  - icon: ':heavy_check_mark:'
    path: go-acl/util/monoid.go
    title: go-acl/util/monoid.go
  - icon: ':heavy_check_mark:'
    path: go-acl/util/segmentTree.go
    title: go-acl/util/segmentTree.go
  - icon: ':heavy_check_mark:'
    path: go-acl/util/sieve.go
    title: go-acl/util/sieve.go
  - icon: ':heavy_check_mark:'
    path: go-acl/util/sieve_test.go
    title: go-acl/util/sieve_test.go
  - icon: ':heavy_check_mark:'
    path: go-acl/util/unionfind.go
    title: go-acl/util/unionfind.go
  - icon: ':heavy_check_mark:'
    path: go-acl/verify/aplusb/verify.test.go
    title: go-acl/verify/aplusb/verify.test.go
  - icon: ':heavy_check_mark:'
    path: go-acl/verify/associative_array/verify.test.go
    title: go-acl/verify/associative_array/verify.test.go
  - icon: ':heavy_check_mark:'
    path: go-acl/verify/double_ended_priority_queue/verify.test.go
    title: go-acl/verify/double_ended_priority_queue/verify.test.go
  - icon: ':heavy_check_mark:'
    path: go-acl/verify/many_aplusb/verify.test.go
    title: go-acl/verify/many_aplusb/verify.test.go
  - icon: ':heavy_check_mark:'
    path: go-acl/verify/predecessor_problem/verify.test.go
    title: go-acl/verify/predecessor_problem/verify.test.go
  _extendedRequiredBy:
  - icon: ':heavy_check_mark:'
    path: go-acl/main.go
    title: go-acl/main.go
  - icon: ':heavy_check_mark:'
    path: go-acl/splay/map.go
    title: go-acl/splay/map.go
  - icon: ':heavy_check_mark:'
    path: go-acl/splay/node.go
    title: go-acl/splay/node.go
  - icon: ':heavy_check_mark:'
    path: go-acl/splay/node_test.go
    title: go-acl/splay/node_test.go
  - icon: ':heavy_check_mark:'
    path: go-acl/splay/set.go
    title: go-acl/splay/set.go
  - icon: ':heavy_check_mark:'
    path: go-acl/splay/set_test.go
    title: go-acl/splay/set_test.go
  - icon: ':heavy_check_mark:'
    path: go-acl/testlib/assert.go
    title: go-acl/testlib/assert.go
  - icon: ':heavy_check_mark:'
    path: go-acl/util/depq_test.go
    title: go-acl/util/depq_test.go
  - icon: ':heavy_check_mark:'
    path: go-acl/util/lib.go
    title: go-acl/util/lib.go
  - icon: ':heavy_check_mark:'
    path: go-acl/util/lib_test.go
    title: go-acl/util/lib_test.go
  - icon: ':heavy_check_mark:'
    path: go-acl/util/math.go
    title: go-acl/util/math.go
  - icon: ':heavy_check_mark:'
    path: go-acl/util/math_test.go
    title: go-acl/util/math_test.go
  - icon: ':heavy_check_mark:'
    path: go-acl/util/monoid.go
    title: go-acl/util/monoid.go
  - icon: ':heavy_check_mark:'
    path: go-acl/util/segmentTree.go
    title: go-acl/util/segmentTree.go
  - icon: ':heavy_check_mark:'
    path: go-acl/util/sieve.go
    title: go-acl/util/sieve.go
  - icon: ':heavy_check_mark:'
    path: go-acl/util/sieve_test.go
    title: go-acl/util/sieve_test.go
  - icon: ':heavy_check_mark:'
    path: go-acl/util/unionfind.go
    title: go-acl/util/unionfind.go
  _extendedVerifiedWith:
  - icon: ':heavy_check_mark:'
    path: go-acl/verify/aplusb/verify.test.go
    title: go-acl/verify/aplusb/verify.test.go
  - icon: ':heavy_check_mark:'
    path: go-acl/verify/associative_array/verify.test.go
    title: go-acl/verify/associative_array/verify.test.go
  - icon: ':heavy_check_mark:'
    path: go-acl/verify/double_ended_priority_queue/verify.test.go
    title: go-acl/verify/double_ended_priority_queue/verify.test.go
  - icon: ':heavy_check_mark:'
    path: go-acl/verify/many_aplusb/verify.test.go
    title: go-acl/verify/many_aplusb/verify.test.go
  - icon: ':heavy_check_mark:'
    path: go-acl/verify/predecessor_problem/verify.test.go
    title: go-acl/verify/predecessor_problem/verify.test.go
  _isVerificationFailed: false
  _pathExtension: go
  _verificationStatusIcon: ':heavy_check_mark:'
  attributes: {}
  bundledCode: "Traceback (most recent call last):\n  File \"/home/runner/.local/lib/python3.10/site-packages/onlinejudge_verify/documentation/build.py\"\
    , line 71, in _render_source_code_stat\n    bundled_code = language.bundle(stat.path,\
    \ basedir=basedir, options={'include_paths': [basedir]}).decode()\n  File \"/home/runner/.local/lib/python3.10/site-packages/onlinejudge_verify/languages/user_defined.py\"\
    , line 68, in bundle\n    raise RuntimeError('bundler is not specified: {}'.format(str(path)))\n\
    RuntimeError: bundler is not specified: go-acl/util/depq.go\n"
  code: "package util\n\nfunc lIdx(idx int) int {\n\treturn idx & ^1\n}\n\nfunc rIdx(idx\
    \ int) int {\n\treturn idx | 1\n}\n\nfunc pIdx(idx int) int {\n\treturn ((idx\
    \ >> 1) - 1) & ^1\n}\n\nfunc cIdx(idx int) int {\n\treturn (idx & ^1)<<1 | 2 |\
    \ idx&1\n}\n\nconst depqCap = 1000\n\ntype DEPQ[T Ordered] struct {\n\tvalues\
    \ []T\n}\n\nfunc NewDEPQ[T Ordered](values ...T) *DEPQ[T] {\n\tpq := &DEPQ[T]{\n\
    \t\tvalues: values,\n\t}\n\tfor i := pq.Size() - 1; i >= 0; i-- {\n\t\tif i&1\
    \ == 1 && pq.values[i-1] < pq.values[i] {\n\t\t\tpq.values[i-1], pq.values[i]\
    \ = pq.values[i], pq.values[i-1]\n\t\t}\n\t\tidx := pq.down(i)\n\t\tpq.upAt(idx,\
    \ i)\n\t}\n\treturn pq\n}\n\nfunc (pq *DEPQ[T]) Size() int {\n\treturn len(pq.values)\n\
    }\n\nfunc (pq *DEPQ[T]) Empty() bool {\n\treturn len(pq.values) == 0\n}\n\nfunc\
    \ (pq *DEPQ[T]) Push(x T) {\n\tpq.values = append(pq.values, x)\n\tpq.up(pq.Size()\
    \ - 1)\n}\n\nfunc (pq *DEPQ[T]) GetMax() T {\n\treturn pq.values[0]\n}\n\nfunc\
    \ (pq *DEPQ[T]) GetMin() T {\n\tif pq.Size() < 2 {\n\t\treturn pq.values[0]\n\t\
    }\n\treturn pq.values[1]\n}\n\nfunc (pq *DEPQ[T]) PopMax() T {\n\tret := pq.GetMax()\n\
    \tpq.values[0] = pq.values[pq.Size()-1]\n\tpq.values = pq.values[:pq.Size()-1]\n\
    \tidx := pq.down(0)\n\tpq.up(idx)\n\treturn ret\n}\n\nfunc (pq *DEPQ[T]) PopMin()\
    \ T {\n\tret := pq.GetMin()\n\tif pq.Size() < 2 {\n\t\tpq.values = []T{}\n\t\t\
    return ret\n\t}\n\tpq.values[1] = pq.values[pq.Size()-1]\n\tpq.values = pq.values[:pq.Size()-1]\n\
    \tidx := pq.down(1)\n\tpq.up(idx)\n\treturn ret\n}\n\nfunc (pq *DEPQ[T]) upAt(idx,\
    \ root int) {\n\tl, r := lIdx(idx), rIdx(idx)\n\n\t// sould be value[l] >= value[r]\n\
    \tif r < pq.Size() && pq.values[l] < pq.values[r] {\n\t\tpq.values[l], pq.values[r]\
    \ = pq.values[r], pq.values[l]\n\t\tidx ^= 1\n\t}\n\n\tfor p := pIdx(idx); idx\
    \ > root && pq.values[p] < pq.values[idx]; idx, p = p, pIdx(p) {\n\t\t// max heap\n\
    \t\tpq.values[idx], pq.values[p] = pq.values[p], pq.values[idx]\n\t}\n\n\tfor\
    \ p := pIdx(idx) | 1; idx > root && pq.values[p] > pq.values[idx]; idx, p = p,\
    \ pIdx(p)|1 {\n\t\t// min heap\n\t\tpq.values[idx], pq.values[p] = pq.values[p],\
    \ pq.values[idx]\n\t}\n}\n\nfunc (pq *DEPQ[T]) up(idx int) {\n\tpq.upAt(idx, 1)\n\
    }\n\nfunc (pq *DEPQ[T]) down(idx int) int {\n\tif idx&1 == 1 {\n\t\t// min heap\n\
    \t\tfor c := cIdx(idx); c < pq.Size(); idx, c = c, cIdx(c) {\n\t\t\tif c+2 < pq.Size()\
    \ && pq.values[c] > pq.values[c+2] {\n\t\t\t\tc += 2\n\t\t\t}\n\t\t\tif pq.values[c]\
    \ < pq.values[idx] {\n\t\t\t\tpq.values[idx], pq.values[c] = pq.values[c], pq.values[idx]\n\
    \t\t\t}\n\t\t}\n\t} else {\n\t\t// max heap\n\t\tfor c := cIdx(idx); c < pq.Size();\
    \ idx, c = c, cIdx(c) {\n\t\t\tif c+2 < pq.Size() && pq.values[c] < pq.values[c+2]\
    \ {\n\t\t\t\tc += 2\n\t\t\t}\n\t\t\tif pq.values[c] > pq.values[idx] {\n\t\t\t\
    \tpq.values[idx], pq.values[c] = pq.values[c], pq.values[idx]\n\t\t\t}\n\t\t}\n\
    \t}\n\treturn idx\n}\n"
  dependsOn:
  - go-acl/splay/node.go
  - go-acl/splay/set_test.go
  - go-acl/splay/node_test.go
  - go-acl/splay/set.go
  - go-acl/splay/map.go
  - go-acl/verify/double_ended_priority_queue/verify.test.go
  - go-acl/verify/predecessor_problem/verify.test.go
  - go-acl/verify/aplusb/verify.test.go
  - go-acl/verify/associative_array/verify.test.go
  - go-acl/verify/many_aplusb/verify.test.go
  - go-acl/testlib/assert.go
  - go-acl/util/unionfind.go
  - go-acl/util/sieve.go
  - go-acl/util/math_test.go
  - go-acl/util/lib_test.go
  - go-acl/util/lib.go
  - go-acl/util/segmentTree.go
  - go-acl/util/math.go
  - go-acl/util/sieve_test.go
  - go-acl/util/depq_test.go
  - go-acl/util/monoid.go
  - go-acl/main.go
  isVerificationFile: false
  path: go-acl/util/depq.go
  requiredBy:
  - go-acl/splay/node.go
  - go-acl/splay/set_test.go
  - go-acl/splay/node_test.go
  - go-acl/splay/set.go
  - go-acl/splay/map.go
  - go-acl/testlib/assert.go
  - go-acl/util/unionfind.go
  - go-acl/util/sieve.go
  - go-acl/util/math_test.go
  - go-acl/util/lib_test.go
  - go-acl/util/lib.go
  - go-acl/util/segmentTree.go
  - go-acl/util/math.go
  - go-acl/util/sieve_test.go
  - go-acl/util/depq_test.go
  - go-acl/util/monoid.go
  - go-acl/main.go
  timestamp: '2023-09-05 00:37:09+09:00'
  verificationStatus: LIBRARY_ALL_AC
  verifiedWith:
  - go-acl/verify/double_ended_priority_queue/verify.test.go
  - go-acl/verify/predecessor_problem/verify.test.go
  - go-acl/verify/aplusb/verify.test.go
  - go-acl/verify/associative_array/verify.test.go
  - go-acl/verify/many_aplusb/verify.test.go
documentation_of: go-acl/util/depq.go
layout: document
redirect_from:
- /library/go-acl/util/depq.go
- /library/go-acl/util/depq.go.html
title: go-acl/util/depq.go
---
